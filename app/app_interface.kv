#:import get_color_from_hex kivy.utils.get_color_from_hex


<ModeButton>
    background_color: app.theme_cls.primary_color
<ContentNavigationDrawer>

    ScrollView:

        MDList:
            TwoLineAvatarListItem:
                text: "ARGBLedControl"
                secondary_text: "Управление адресными"
                tertiary_text: "светодиодными лентами"
                ImageLeftWidget:
                    source: "icon.png"
            OneLineIconListItem:
                text: "Strip Control"

                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "scr 1"

                IconLeftWidget:
                    icon: "alarm-light"


            OneLineIconListItem:
                text: "Strip settings"
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "scr 3"
                IconLeftWidget:
                    icon: "cogs"
            OneLineIconListItem:
                text: "Board settings"
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "scr 2"
                IconLeftWidget:
                    icon: "cogs"
            OneLineIconListItem:
                text: "Log"
                on_press:
                    root.nav_drawer.set_state("close")
                    root.screen_manager.current = "scr 4"
                IconLeftWidget:
                    icon: "cogs"


MDScreenMain:

    MDToolbar:
        size_hint_y: 0.07
        id: toolbar
        pos_hint: {"top": 1}
        elevation: 10
        title: ""
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        Label:
            id: lock_label
            text: ""
        MDSwitch:
            id: ip_switch
            pos_hint: {'center_x': .5, 'center_y': .5}

    MDNavigationLayout:
        x: toolbar.height

        ScreenManager:
            id: screen_manager

            MDScreen:
                name: "scr 1"
                MDBoxLayout:
                    size_hint_y: 0.93
                    orientation: "vertical"
                    MDBoxLayout:
                        orientation: "vertical"
                        MDLabel:
                            size_hint_y: 0.3
                            text: "мигающие режимы"
                            halign: "center"
                        MDBoxLayout:
                            spacing: 5
                            padding: 5
                            ModeButton:
                                text: "mode 1"
                                on_press: root.run_command("mode 1", "-c")

                            ModeButton:
                                text: "mode 2"
                                on_press: root.run_command("mode 2", "-c")

                            ModeButton:
                                text: "mode 1v2"
                                on_press: root.run_command("mode 1", "-c")

                            ModeButton:
                                text: "mode 4"
                                on_press: root.run_command("mode 2", "-c")

                    MDBoxLayout:
                        orientation: "vertical"
                        MDLabel:
                            size_hint_y: 0.6
                            text: "Просто цвета"
                            halign: "center"
                        MDBoxLayout:
                            orientation: "horizontal"
                            spacing: 5
                            padding: 5
                            ModeButton:
                                text: "color 1"
                                on_press: root.run_command("mode 10", "-c")
                            ModeButton:
                                text: "color 2"
                                on_press: root.run_command("mode 11", "-c")
                            ModeButton:
                                text: "color 3"
                                on_press: root.run_command("mode 12", "-c")
                            ModeButton:
                                text: "color 4"
                                on_press: root.run_command("mode 13", "-c")
                            ModeButton:
                                text: "color 5"
                                on_press: root.run_command("mode 14", "-c")
                        MDBoxLayout:
                            orientation: "horizontal"
                            spacing: 5
                            padding: 5
                            ModeButton:
                                text: "color 6"
                                on_press: root.run_command("mode 15", "-c")
                            ModeButton:
                                text: "color 7"
                                on_press: root.run_command("mode 16", "-c")
                            ModeButton:
                                text: "color 8"
                                on_press: root.run_command("mode 17", "-c")
                            ModeButton:
                                text: "color 9"
                                on_press: root.run_command("mode 18", "-c")
                            ModeButton:
                                text: "color 10"
                                on_press: root.run_command("mode 19", "-c")
                    MDBoxLayout:
                        orientation: "vertical"
                        MDLabel:
                            size_hint_y: 0.3
                            text: "изменение яркости"
                            halign: "center"
                        MDSlider:
                            id: brightness_slider
                            min: 0
                            max: 100
                            value: 10
                            on_touch_up:
                                root.set_brig()
                        MDLabel:
                            size_hint_y: 0.3
                            halign: "center"








            MDScreen:
                name: "scr 2"

                MDBoxLayout:
                    orientation: "vertical"
                    size_hint_y: 0.93
                    MDBoxLayout:
                        spacing: "32sp"
                        adaptive_height: True
                        MDFloatingActionButton
                            icon: "download"
                            type: "large"
                            on_press:
                                root.load_config("gmj", "-s")
                        MDFloatingActionButton
                            icon: "upload"
                            type: "large"
                            on_press: root.run_command("smj", "-s")
                        Label:
                            size_hint_x: 0.5
                    MDBoxLayout:
                    MDBoxLayout:
                    MDBoxLayout:
                    MDBoxLayout:

            MDScreen:
                name: "scr 3"

                MDBoxLayout:
                    orientation: "vertical"
                    size_hint_y: 0.93
                    MDBoxLayout:
                        spacing: "16sp"
                        adaptive_height: True
                        MDFloatingActionButton
                            icon: "download"
                            type: "large"
                            on_press:
                                root.load_config("gtj", "-s")
                        MDFloatingActionButton
                            icon: "upload"
                            type: "large"
                            on_press: root.run_command("stj", "-s")
                        Label:
                            size_hint_x: 0.5
                            text: "Strip Settings"
                    MDBoxLayout:
                        MDSlider:
                            id: slider_add_on_tick_1
                            min: root.esp["led_configs_mask"]["1"]["add on tick"]["min_val"]
                            max: root.esp["led_configs_mask"]["1"]["add on tick"]["max_val"]
                            value: 10
                            on_touch_up:
                    MDBoxLayout:
                        MDSlider:
                            id: slider_r_2
                            min: root.esp["led_configs_mask"]["2"]["r"]["min_val"]
                            max: root.esp["led_configs_mask"]["2"]["r"]["max_val"]
                            value: 10
                            on_touch_up:
                    MDBoxLayout:
                        MDSlider:
                            id: slider_add_on_tick_2
                            min: root.esp["led_configs_mask"]["2"]["add on tick"]["min_val"]
                            max: root.esp["led_configs_mask"]["2"]["add on tick"]["max_val"]
                            value: 10
                            on_touch_up:
                    MDBoxLayout:
            MDScreen:
                name: "scr 4"
                MDIconButton:
                    id: butt
                    icon: "language-python"
                    user_front_size: 1000

                MDLabel:
                    id: debug_label
                    text: "Screen 2"
                    halign: "center"

        MDNavigationDrawer:
            id: nav_drawer

            ContentNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: nav_drawer